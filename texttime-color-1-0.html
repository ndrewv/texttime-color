<!DOCTYPE html>
<html>
<head>
	<title>Text Time</title>
	<meta charset="utf-8">
	<meta name="viewport" content="height=device-height,width=device-width,initial-scale=1.0,maximum-scale=1.0" >
	<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="css/themes/pebble-light.min.css" />
  	<link rel="stylesheet" href="css/themes/jquery.mobile.icons.min.css" />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile.structure-1.4.5.min.css" />
	<link rel="stylesheet" href="colorpicker/jquery.simplecolorpicker.css">
	<link rel="stylesheet" href="css/texttime-color.css" />
	<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
</head>
<body>
	<form name="form" name="form" method="GET">
		<div data-theme="a" data-role="page">
			<div data-role="header" class="jqm-header">
				<h1>Text Time</h1>
			</div>
			<div id="textDiv"></div>
			<div data-role="content">
			<div data-role="fieldcontain">
			<div id="pebbleTime">
				<div id="outerLeft" class="left"></div>
					<div id="outerFrame" class="left">
						<div id="wrapper" class="center">
							<div id="innerLeft" class="left"></div>
							<div id="innerFrame" class="left">
								<div id="preview" class="center bitham">
									<div class="line" id="line_1" data-line="1">twelve</div>
									<div class="line" id="line_2" data-line="2">thirty</div>
									<div class="line" id="line_3" data-line="3">seven</div>
									<div class="line" id="line_4" data-line="4">Apr 13</div>
								</div>
							</div>
							<div id="innerRight" class="left"></div>
						</div>
					</div>
				<div id="outerRight" class="left"></div>
				</div>
			<div data-role="fieldcontain">		
				<label for="background">Background:</label>
				<select name="background" id="background" data-colorselector="true" data-role="none">
					<option data-color="#000000" value="192">Black</option>
					<option data-color="#000055" value="193">Oxford Blue</option>
					<option data-color="#0000aa" value="194">Duke Blue</option>
					<option data-color="#0000ff" value="195">Blue</option>
					<option data-color="#005500" value="196">Dark Green</option>
					<option data-color="#005555" value="197">Midnight Green</option>
					<option data-color="#0055aa" value="198">Cobalt Blue</option>
					<option data-color="#0055ff" value="199">Blue Moon</option>
					<option data-color="#550000" value="208">Bulgarian Rose</option>
					<option data-color="#550055" value="209">Imperial Purple</option>
					<option data-color="#5500aa" value="210">Indigo</option>
					<option data-color="#5500ff" value="211">Electric Ultramarine</option>
					<option data-color="#555500" value="212">Army Green</option>
					<option data-color="#555555" value="213">Dark Gray</option>
					<option data-color="#5555aa" value="214">Liberty</option>
					<option data-color="#5555ff" value="215">Light Blue</option>
					<option data-color="#aa0000" value="224">Candy Apple Red</option>
					<option data-color="#aa0055" value="225">Jazz Berry Jam</option>
					<option data-color="#aa00aa" value="226">Purple</option>
					<option data-color="#aa00ff" value="227">vivid Violet</option>
					<option data-color="#aa5500" value="228">Windsor Tan</option>
					<option data-color="#aa5555" value="229">Rose Vale</option>
					<option data-color="#aa55aa" value="230">Purpureus</option>
					<option data-color="#aa55ff" value="231">Lavender Indigo</option>
					<option data-color="#ff0000" value="240">Red</option>
					<option data-color="#ff0055" value="241">Folly</option>
					<option data-color="#ff00aa" value="242">Fashion Magenta</option>
					<option data-color="#ff00ff" value="243">Magenta</option>
					<option data-color="#ff5500" value="244">Orange</option>
					<option data-color="#ff5555" value="245">Sunset Orange</option>
					<option data-color="#ff55aa" value="246">Brilliant Rose</option>
					<option data-color="#ff55ff" value="247">Shocking Pink</option>
					<option data-color="#00aa00" value="200">Islamic Green</option>
					<option data-color="#00aa55" value="201">Jaeger Green</option>
					<option data-color="#00aaaa" value="202">Tiffany Blue</option>
					<option data-color="#00aaff" value="203">Vivid Cerulean</option>
					<option data-color="#00ff00" value="204">Green</option>
					<option data-color="#00ff55" value="205">Malachite</option>
					<option data-color="#00ffaa" value="206">Spring Green</option>
					<option data-color="#00ffff" value="207">Cyan</option>
					<option data-color="#55aa00" value="216">Kelly Green</option>
					<option data-color="#55aa55" value="217">May Green</option>
					<option data-color="#55aaaa" value="218">Cadet Blue</option>
					<option data-color="#55aaff" value="219">Picton Blue</option>
					<option data-color="#55ff00" value="220">Bright Green</option>
					<option data-color="#55ff55" value="221">Screamin Green</option>
					<option data-color="#55ffaa" value="222">Medium Aquamarine</option>
					<option data-color="#55ffff" value="223">Electric Blue</option>
					<option data-color="#aaaa00" value="232">Limerick</option>
					<option data-color="#aaaa55" value="233">Brass</option>
					<option data-color="#aaaaaa" value="234">Light Gray</option>
					<option data-color="#aaaaff" value="235">Baby Blue</option>
					<option data-color="#aaff00" value="236">Spring Bud</option>
					<option data-color="#aaff55" value="237">Inchworm</option>
					<option data-color="#aaffaa" value="238">Mint Green</option>
					<option data-color="#aaffff" value="239">Celeste</option>
					<option data-color="#ffaa00" value="248">Chrome Yellow</option>
					<option data-color="#ffaa55" value="249">Rajah</option>
					<option data-color="#ffaaaa" value="250">Melon</option>
					<option data-color="#ffaaff" value="251">Rich Lavender</option>
					<option data-color="#ffff00" value="252">Yellow</option>
					<option data-color="#ffff55" value="253">Icterine</option>
					<option data-color="#ffffaa" value="254">Pastel Yellow</option>
					<option data-color="#ffffff" value="255">White</option>
				</select>
			</div>
			<div data-role="fieldcontain">
				<label for="foreground">Foreground:</label>
				<select name="foreground" id="foreground" data-colorselector="true" data-role="none">
					<option data-color="#000000" value="192">Black</option>
					<option data-color="#000055" value="193">Oxford Blue</option>
					<option data-color="#0000aa" value="194">Duke Blue</option>
					<option data-color="#0000ff" value="195">Blue</option>
					<option data-color="#005500" value="196">Dark Green</option>
					<option data-color="#005555" value="197">Midnight Green</option>
					<option data-color="#0055aa" value="198">Cobalt Blue</option>
					<option data-color="#0055ff" value="199">Blue Moon</option>
					<option data-color="#550000" value="208">Bulgarian Rose</option>
					<option data-color="#550055" value="209">Imperial Purple</option>
					<option data-color="#5500aa" value="210">Indigo</option>
					<option data-color="#5500ff" value="211">Electric Ultramarine</option>
					<option data-color="#555500" value="212">Army Green</option>
					<option data-color="#555555" value="213">Dark Gray</option>
					<option data-color="#5555aa" value="214">Liberty</option>
					<option data-color="#5555ff" value="215">Light Blue</option>
					<option data-color="#aa0000" value="224">Candy Apple Red</option>
					<option data-color="#aa0055" value="225">Jazz Berry Jam</option>
					<option data-color="#aa00aa" value="226">Purple</option>
					<option data-color="#aa00ff" value="227">vivid Violet</option>
					<option data-color="#aa5500" value="228">Windsor Tan</option>
					<option data-color="#aa5555" value="229">Rose Vale</option>
					<option data-color="#aa55aa" value="230">Purpureus</option>
					<option data-color="#aa55ff" value="231">Lavender Indigo</option>
					<option data-color="#ff0000" value="240">Red</option>
					<option data-color="#ff0055" value="241">Folly</option>
					<option data-color="#ff00aa" value="242">Fashion Magenta</option>
					<option data-color="#ff00ff" value="243">Magenta</option>
					<option data-color="#ff5500" value="244">Orange</option>
					<option data-color="#ff5555" value="245">Sunset Orange</option>
					<option data-color="#ff55aa" value="246">Brilliant Rose</option>
					<option data-color="#ff55ff" value="247">Shocking Pink</option>
					<option data-color="#00aa00" value="200">Islamic Green</option>
					<option data-color="#00aa55" value="201">Jaeger Green</option>
					<option data-color="#00aaaa" value="202">Tiffany Blue</option>
					<option data-color="#00aaff" value="203">Vivid Cerulean</option>
					<option data-color="#00ff00" value="204">Green</option>
					<option data-color="#00ff55" value="205">Malachite</option>
					<option data-color="#00ffaa" value="206">Spring Green</option>
					<option data-color="#00ffff" value="207">Cyan</option>
					<option data-color="#55aa00" value="216">Kelly Green</option>
					<option data-color="#55aa55" value="217">May Green</option>
					<option data-color="#55aaaa" value="218">Cadet Blue</option>
					<option data-color="#55aaff" value="219">Picton Blue</option>
					<option data-color="#55ff00" value="220">Bright Green</option>
					<option data-color="#55ff55" value="221">Screamin Green</option>
					<option data-color="#55ffaa" value="222">Medium Aquamarine</option>
					<option data-color="#55ffff" value="223">Electric Blue</option>
					<option data-color="#aaaa00" value="232">Limerick</option>
					<option data-color="#aaaa55" value="233">Brass</option>
					<option data-color="#aaaaaa" value="234">Light Gray</option>
					<option data-color="#aaaaff" value="235">Baby Blue</option>
					<option data-color="#aaff00" value="236">Spring Bud</option>
					<option data-color="#aaff55" value="237">Inchworm</option>
					<option data-color="#aaffaa" value="238">Mint Green</option>
					<option data-color="#aaffff" value="239">Celeste</option>
					<option data-color="#ffaa00" value="248">Chrome Yellow</option>
					<option data-color="#ffaa55" value="249">Rajah</option>
					<option data-color="#ffaaaa" value="250">Melon</option>
					<option data-color="#ffaaff" value="251">Rich Lavender</option>
					<option data-color="#ffff00" value="252">Yellow</option>
					<option data-color="#ffff55" value="253">Icterine</option>
					<option data-color="#ffffaa" value="254">Pastel Yellow</option>
					<option data-color="#ffffff" value="255">White</option>
				</select>
			</div>
			<div data-role="fieldcontain">
				<label for="fontstyle">Font Style:</label>
				<select name="fontstyle" id="fontstyle">
					<option value="0" data-font="bitham">Bitham (Default)</option>
					<option value="1" data-font="20db">20db</option>
					<option value="2" data-font="archistico_b">archistico_b</option>
					<option value="3" data-font="archistico">archistico</option>
					<option value="4" data-font="bebas">bebas</option>
					<option value="5" data-font="bostontraffic">bostontraffic</option>
					<option value="6" data-font="capsuula">capsuula</option>
					<option value="7" data-font="captureit2">captureit2</option>
					<option value="8" data-font="captureit">captureit</option>
					<option value="9" data-font="danielbl">danielbl</option>
					<option value="10" data-font="daniel_b">daniel_b</option>
					<option value="11" data-font="daniel">daniel</option>
					<option value="12" data-font="destencil">destencil</option>
					<option value="13" data-font="digitaldream_fn">digitaldream_fn</option>
					<option value="14" data-font="digitaldream_fsn">digitaldream_fsn</option>
					<option value="15" data-font="digitaldream_fsr">digitaldream_fsr</option>
					<option value="16" data-font="digitaldream_fr">digitaldream_fr</option>
					<option value="17" data-font="digitaldream_nr">digitaldream_nr</option>
					<option value="18" data-font="digitaldream_sn">digitaldream_sn</option>
					<option value="19" data-font="digitaldream_sr">digitaldream_sr</option>
					<option value="20" data-font="digitaldream_r">digitaldream_r</option>
					<option value="21" data-font="diner_fatt">diner_fatt</option>
					<option value="22" data-font="diner_obese">diner_obese</option>
					<option value="23" data-font="diner">diner</option>
					<option value="24" data-font="diner_skinny">diner_skinny</option>
					<option value="25" data-font="distantgalaxy">distantgalaxy</option>
					<option value="26" data-font="duplexide">duplexide</option>
					<option value="27" data-font="enigmatic_b">enigmatic_b</option>
					<option value="28" data-font="enigmatic_i">enigmatic_i</option>
					<option value="29" data-font="enigmatic">enigmatic</option>
					<option value="30" data-font="firecat">firecat</option>
					<option value="31" data-font="furore">furore</option>
					<option value="32" data-font="gooddog">gooddog</option>
					<option value="33" data-font="heavydata">heavydata</option>
					<option value="34" data-font="hetelica">hetelica</option>
					<option value="35" data-font="indubitably">indubitably</option>
					<option value="36" data-font="intruderalert">intruderalert</option>
					<option value="37" data-font="juice_bi">juice_bi</option>
					<option value="38" data-font="juice_b">juice_b</option>
					<option value="39" data-font="juice_i">juice_i</option>
					<option value="40" data-font="juice_li">juice_li</option>
					<option value="41" data-font="juice_l">juice_l</option>
					<option value="42" data-font="juice_r">juice_r</option>
					<option value="43" data-font="liquidism">liquidism</option>
					<option value="44" data-font="majorsnafu">majorsnafu</option>
					<option value="45" data-font="minotaur">minotaur</option>
					<option value="46" data-font="origicide">origicide</option>
					<option value="47" data-font="pleasantlyplump">pleasantlyplump</option>
					<option value="48" data-font="print_b">print_b</option>
					<option value="49" data-font="print_c">print_c</option>
					<option value="50" data-font="print_d">print_d</option>
					<option value="51" data-font="qikki">qikki</option>
					<option value="52" data-font="quickendjerk">quickendjerk</option>
					<option value="53" data-font="radioland_s">radioland_s</option>
					<option value="54" data-font="radioland">radioland</option>
					<option value="55" data-font="redressed">redressed</option>
					<option value="56" data-font="roboto_bli">roboto_bli</option>
					<option value="57" data-font="roboto_bl">roboto_bl</option>
					<option value="58" data-font="roboto_bci">roboto_bci</option>
					<option value="59" data-font="roboto_bc">roboto_bc</option>
					<option value="60" data-font="roboto_bi">roboto_bi</option>
					<option value="61" data-font="roboto_b">roboto_b</option>
					<option value="62" data-font="roboto_ci">roboto_ci</option>
					<option value="63" data-font="roboto_c">roboto_c</option>
					<option value="64" data-font="roboto_i">roboto_i</option>
					<option value="65" data-font="roboto_lci">roboto_lci</option>
					<option value="66" data-font="roboto_lc">roboto_lc</option>
					<option value="67" data-font="roboto_li">roboto_li</option>
					<option value="68" data-font="roboto_l">roboto_l</option>
					<option value="69" data-font="roboto_mi">roboto_mi</option>
					<option value="70" data-font="roboto_m">roboto_m</option>
					<option value="71" data-font="roboto_r">roboto_r</option>
					<option value="72" data-font="roboto_ti">roboto_ti</option>
					<option value="73" data-font="roboto_t">roboto_t</option>
					<option value="74" data-font="wasabi_c">wasabi_c</option>
					<option value="75" data-font="wasabi_r">wasabi_r</option>
					<option value="76" data-font="wondercomicb_i">wondercomicb_i</option>
					<option value="77" data-font="wondercomicb_r">wondercomicb_r</option>
					<option value="78" data-font="wondercomici_i">wondercomici_i</option>
					<option value="79" data-font="wondercomici_r">wondercomici_r</option>
					<option value="80" data-font="wondercomic_bi">wondercomic_bi</option>
					<option value="81" data-font="wondercomic_b">wondercomic_b</option>
					<option value="82" data-font="wondercomic_i">wondercomic_i</option>
					<option value="83" data-font="wondercomic_r">wondercomic_r</option>
					<option value="84" data-font="silkscreenex_b">silkscreenex_b</option>
					<option value="85" data-font="silkscreenex_n">silkscreenex_n</option>
					<option value="86" data-font="silkscreen_b">silkscreen_b</option>
					<option value="87" data-font="silkscreen_n">silkscreen_n</option>
					<option value="88" data-font="sinkinsans_100i">sinkinsans_100i</option>
					<option value="89" data-font="sinkinsans_100">sinkinsans_100</option>
					<option value="90" data-font="sinkinsans_200i">sinkinsans_200i</option>
					<option value="91" data-font="sinkinsans_200">sinkinsans_200</option>
					<option value="92" data-font="sinkinsans_300i">sinkinsans_300i</option>
					<option value="93" data-font="sinkinsans_300">sinkinsans_300</option>
					<option value="94" data-font="sinkinsans_400i">sinkinsans_400i</option>
					<option value="95" data-font="sinkinsans_400">sinkinsans_400</option>
					<option value="96" data-font="sinkinsans_500i">sinkinsans_500i</option>
					<option value="97" data-font="sinkinsans_500">sinkinsans_500</option>
					<option value="98" data-font="sinkinsans_600i">sinkinsans_600i</option>
					<option value="99" data-font="sinkinsans_600">sinkinsans_600</option>
					<option value="100" data-font="sinkinsans_700i">sinkinsans_700i</option>
					<option value="101" data-font="sinkinsans_700">sinkinsans_700</option>
					<option value="102" data-font="sinkinsans_800i">sinkinsans_800i</option>
					<option value="103" data-font="sinkinsans_800">sinkinsans_800</option>
					<option value="104" data-font="sinkinsans_900i">sinkinsans_900i</option>
					<option value="105" data-font="sinkinsans_900">sinkinsans_900</option>
					<option value="106" data-font="spincycle_3d">spincycle_3d</option>
					<option value="107" data-font="spincycle">spincycle</option>
					<option value="108" data-font="undercover">undercover</option>
					<option value="109" data-font="vanilla">vanilla</option>
					<option value="110" data-font="walkway">walkway</option>
					<option value="111" data-font="walkway_b">walkway_b</option>
					<option value="112" data-font="walkwayob">walkwayob</option>
					<option value="113" data-font="walkwayob_b">walkwayob_b</option>
					<option value="114" data-font="walkwayob_sb">walkwayob_sb</option>
					<option value="115" data-font="walkwayob_ub">walkwayob_ub</option>
					<option value="116" data-font="walkwayob">walkwayob</option>
					<option value="117" data-font="walkway_sb">walkway_sb</option>
					<option value="118" data-font="walkway_ub">walkway_ub</option>
					<option value="119" data-font="whiterabbit">whiterabbit</option>
					<option value="120" data-font="wideawake_b">wideawake_b</option>
					<option value="121" data-font="wideawake">wideawake</option>
				</select>
			</div>
			<div data-role="fieldcontain">
				<label for="fontsize">Font Size:</label>
				<select name="fontsize" id="fontsize">
					<option value="20" data-size="20px">20</option>
					<option value="21" data-size="21px">21</option>
					<option value="22" data-size="22px">22</option>
					<option value="23" data-size="23px">23</option>
					<option value="24" data-size="24px">24</option>
					<option value="25" data-size="25px">25</option>
					<option value="26" data-size="26px">26</option>
					<option value="27" data-size="27px">27</option>
					<option value="28" data-size="28px">28</option>
					<option value="29" data-size="29px">29</option>
					<option value="30" data-size="30px">30</option>
					<option value="31" data-size="31px">31</option>
					<option value="32" data-size="32px">32</option>
					<option value="33" data-size="33px">33</option>
					<option value="34" data-size="34px" selected="true">34</option>
					<option value="35" data-size="35px">35</option>
					<option value="36" data-size="36px">36</option>
					<option value="37" data-size="37px">37</option>
					<option value="38" data-size="38px">38</option>
					<option value="39" data-size="39px">39</option>
					<option value="40" data-size="40px">40</option>
					<option value="41" data-size="41px">41</option>
					<option value="42" data-size="42px">42</option>
					<option value="43" data-size="43px">43</option>
					<option value="44" data-size="44px">44</option>
					<option value="45" data-size="45px">45</option>
					<option value="46" data-size="46px">46</option>
				</select>
			</div>
			<div data-role="fieldcontain">
				<label for="align">Alignment:</label>
				<fieldset data-role="controlgroup" name="align" data-type="horizontal">
					<input type="radio" name="align" id="align_1" value="0"/>
					<label for="align_1"  data-align="left">Left</label>
					<input type="radio" name="align" id="align_2" value="1"/>
					<label for="align_2" data-align="center">Centre</label>
					<input type="radio" name="align" id="align_3" value="2"/>
					<label for="align_3" data-align="right">Right</label>
				</fieldset>
			</div>
				<div data-role="fieldcontain">
					<label for="datestyle">Date Style:</label>
					<select name="datestyle" id="datestyle">
						<option value="0">Month</option>
						<option value="1">Weekday</option>
						<option value="2">No Date</option>
					</select>
				</div>
				<div data-role="fieldcontain">
					<label for="capital">Capitalize Month/Weekday:</label>
					<fieldset data-role="controlgroup"  name="capital" data-type="horizontal">
						<input type="radio" name="capital" id="capital_1" value="0"/>
						<label for="capital_1">Yes</label>
						<input type="radio" name="capital" id="capital_2" value="1"/>
						<label for="capital_2">No</label>
					</fieldset>
				</div>
				<div data-theme="a" data-role="fieldcontain">
					<label for="vertoffset">Vertical Offset (px):</label>
					<select name="vertoffset" id="vertoffset">
						<option value="0">0 (Default)</option>
						<option value="5">5</option>
						<option value="10">10</option>
						<option value="15">15</option>
						<option value="19">19 (1/2 line)</option>
						<option value="25">25</option>
						<option value="30">30</option>
						<option value="38">38 (1 line)</option>
					</select>
				</div>
				<div data-role="fieldcontain">
					<label for="animation">Animation Speed:</label>
					<select name="animation" id="animation">
						<option value="700">Default</option>
						<option value="1000">Slow</option>
						<option value="500">Fast</option>
						<option value="0">None</option>
					</select>
				</div>
				
				<div data-role="footer" data-position="fixed" data-tap-toggle="false">
					<div data-role="navbar">
					<ul>
					  <li><button data-theme="b" id="cancel" onclick="cancelForm();">Cancel</button></li>
					  <li><button data-theme="b" id="submit" onclick="submitForm();">Submit</button></li>
					</ul>
				  </div>
				</div>
			</div>			
		</div>
	</form>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.js"></script>
    <script src="colorpicker/jquery.simplecolorpicker.js"></script>
	<script>

$(document).ready(function () {
     $('select[name="background"]').simplecolorpicker({picker: true});
	 $('select[name="foreground"]').simplecolorpicker({picker: true});

	/*JQuery helper functions*/	 
	function changeLineColor(color){
	$('[data-line]').each(function(){$(this).css("color",color)});
	}
	
	function changeAlign(align){
	$('.line').each(function(){$(this).css("text-align", align)});
	}
	
	function changeDate(date, capital){
	alert(date + " " + capital);
	}

	/*Change listeners*/	 
	$('#background').on('change', function() {
	$('#preview').css("background",$(this).find(":selected").data("color"));
	});

	$('#foreground').on('change', function() {
	changeLineColor($(this).find(":selected").data("color"));
	});

	$('#fontstyle').on('change', function() {
	$('#preview').attr('class', 'center '+ $(this).find(":selected").data("font"));
	$('.line').each(function(){$(this).css("font-size", $('#fontsize').find(":selected").data("size"))});
	});

	$('#fontsize').on('change', function() {
	$('.line').each(function(){$(this).css("font-size", $('#fontsize').find(":selected").data("size"))});
	});
	
	$('fieldset[name=align]').find('.ui-btn').on('click', function(){
	changeAlign($(this).data("align"));
	});
	
	$('fieldset[name=capital]').find('.ui-btn').on('click', function(){
	var target = $(this).attr('for');
	alert($("'#"+target+"'"));
	
	changeDate($('#datestyle').find(":selected").val(),$("'#"+$(this).attr('for')+"']").val());
	});
});

/*Form functions*/	 
		function getQueryParam(variable, default_) {
		    var query = window.location.search.substring(1);
		    var vars = query.split('&');
		    for (var i = 0; i < vars.length; i++) {
		        var pair = vars[i].split('=');
		        if (pair[0] == variable)
		            return decodeURIComponent(pair[1]);
		    }
		    return default_ || false;
		}
		
		function submitForm(){
		var variables = {};
		var selects=this.form.getElementsByTagName('select');
		//encode selects
		for(var i=0;i<selects.length;i++){
			variables[selects[i].name.toString()]=parseInt(selects[i].value);
		}
		var radios=this.form.getElementsByTagName('input');
		for(var j=0;j<radios.length;j++){
			if(radios[j].checked == true){
				variables[radios[j].name.toString()]=parseInt(radios[j].value);	
			}
		}
	        var location = return_to+encodeURIComponent(JSON.stringify(variables));
            	document.location = location;
		}
		function cancelForm(){
  		document.location = return_to;
		}
		
		var return_to = getQueryParam('return_to', 'pebblejs://close#');
		var config = getQueryParam('opts', '');
		document.getElementById("textDiv").innerHTML = window.location.search.substr(1);
		var obj = JSON.parse(config);
		if(obj!==null){
			for (var key in obj){
  				if(obj.hasOwnProperty(key)){
					var element=document.getElementsByName(key);
					if (element!==null) {
					var len = element.length;
						switch(element.length){
							case 0:
							break;
							case 1:{
								element[0].value=parseInt(obj[key]);
								}break;
							default:{
								for(var i = 0; i < element.length; i++){
									if(element[i].value == parseInt(obj[key])){
										element[i].checked = true;
										break;
									}
								}
							}							
						}
					}
				}
			}
		}
	</script>
</body>
</html>
